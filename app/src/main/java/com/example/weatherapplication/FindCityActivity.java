
package com.example.weatherapplication;

import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.SearchView;

import androidx.appcompat.app.AppCompatActivity;

import java.util.ArrayList;

public class FindCityActivity extends AppCompatActivity {

    String citiesString = "Абаза\n" + "Абакан\n" + "Абдулино\n" + "Абинск\n" + "Агидель\n" + "Агрыз\n" + "Адыгейск\n" + "Азнакаево\n" + "Азов\n" + "Ак-Довурак\n" + "Аксай\n" + "Алагир\n" + "Алапаевск\n" + "Алатырь\n" + "Алдан\n" + "Алейск\n" + "Александров\n" + "Александровск\n" + "Александровск-Сахалинский\n" + "Алексеевка\n" + "Алексин\n" + "Алзамай\n" + "Алупка\n" + "Алушта\n" + "Альметьевск\n" + "Амурск\n" + "Анадырь\n" + "Анапа\n" + "Ангарск\n" + "Андреаполь\n" + "Анжеро-Судженск\n" + "Анива\n" + "Апатиты\n" + "Апрелевка\n" + "Апшеронск\n" + "Арамиль\n" + "Аргун\n" + "Ардатов\n" + "Ардон\n" + "Арзамас\n" + "Аркадак\n" + "Армавир\n" + "Армянск\n" + "Арсеньев\n" + "Арск\n" + "Артём\n" + "Артёмовск\n" + "Артёмовский\n" + "Архангельск\n" + "Асбест\n" + "Асино\n" + "Астрахань\n" + "Аткарск\n" + "Ахтубинск\n" + "Ачинск\n" + "Аша\n" + "Бабаево\n" + "Бабушкин\n" + "Бавлы\n" + "Багратионовск\n" + "Байкальск\n" + "Баймак\n" + "Бакал\n" + "Баксан\n" + "Балабаново\n" + "Балаково\n" + "Балахна\n" + "Балашиха\n" + "Балашов\n" + "Балей\n" + "Балтийск\n" + "Барабинск\n" + "Барнаул\n" + "Барыш\n" + "Батайск\n" + "Бахчисарай\n" + "Бежецк\n" + "Белая Калитва\n" + "Белая Холуница\n" + "Белгород\n" + "Белебей\n" + "Белёв\n" + "Белинский\n" + "Белово\n" + "Белогорск\n" + "Белогорск\n" + "Белозерск\n" + "Белокуриха\n" + "Беломорск\n" + "Белоозёрский\n" + "Белорецк\n" + "Белореченск\n" + "Белоусово\n" + "Белоярский\n" + "Белый\n" + "Бердск\n" + "Березники\n" + "Берёзовский\n" + "Берёзовский\n" + "Беслан\n" + "Бийск\n" + "Бикин\n" + "Билибино\n" + "Биробиджан\n" + "Бирск\n" + "Бирюсинск\n" + "Бирюч\n" + "Благовещенск\n" + "Благовещенск\n" + "Благодарный\n" + "Бобров\n" + "Богданович\n" + "Богородицк\n" + "Богородск\n" + "Боготол\n" + "Богучар\n" + "Бодайбо\n" + "Бокситогорск\n" + "Болгар\n" + "Бологое\n" + "Болотное\n" + "Болохово\n" + "Болхов\n" + "Большой Камень\n" + "Бор\n" + "Борзя\n" + "Борисоглебск\n" + "Боровичи\n" + "Боровск\n" + "Бородино\n" + "Братск\n" + "Бронницы\n" + "Брянск\n" + "Бугульма\n" + "Бугуруслан\n" + "Будённовск\n" + "Бузулук\n" + "Буинск\n" + "Буй\n" + "Буйнакск\n" + "Бутурлиновка\n" + "Валдай\n" + "Валуйки\n" + "Велиж\n" + "Великие Луки\n" + "Великий Новгород\n" + "Великий Устюг\n" + "Вельск\n" + "Венёв\n" + "Верещагино\n" + "Верея\n" + "Верхнеуральск\n" + "Верхний Тагил\n" + "Верхний Уфалей\n" + "Верхняя Пышма\n" + "Верхняя Салда\n" + "Верхняя Тура\n" + "Верхотурье\n" + "Верхоянск\n" + "Весьегонск\n" + "Ветлуга\n" + "Видное\n" + "Вилюйск\n" + "Вилючинск\n" + "Вихоревка\n" + "Вичуга\n" + "Владивосток\n" + "Владикавказ\n" + "Владимир\n" + "Волгоград\n" + "Волгодонск\n" + "Волгореченск\n" + "Волжск\n" + "Волжский\n" + "Вологда\n" + "Володарск\n" + "Волоколамск\n" + "Волосово\n" + "Волхов\n" + "Волчанск\n" + "Вольск\n" + "Воркута\n" + "Воронеж\n" + "Ворсма\n" + "Воскресенск\n" + "Воткинск\n" + "Всеволожск\n" + "Вуктыл\n" + "Выборг\n" + "Выкса\n" + "Высоковск\n" + "Высоцк\n" + "Вытегра\n" + "Вышний Волочёк\n" + "Вяземский\n" + "Вязники\n" + "Вязьма\n" + "Вятские Поляны\n" + "Гаврилов Посад\n" + "Гаврилов-Ям\n" + "Гагарин\n" + "Гаджиево\n" + "Гай\n" + "Галич\n" + "Гатчина\n" + "Гвардейск\n" + "Гдов\n" + "Геленджик\n" + "Георгиевск\n" + "Глазов\n" + "Голицыно\n" + "Горбатов\n" + "Горно-Алтайск\n" + "Горнозаводск\n" + "Горняк\n" + "Городец\n" + "Городище\n" + "Городовиковск\n" + "Гороховец\n" + "Горячий Ключ\n" + "Грайворон\n" + "Гремячинск\n" + "Грозный\n" + "Грязи\n" + "Грязовец\n" + "Губаха\n" + "Губкин\n" + "Губкинский\n" + "Гудермес\n" + "Гуково\n" + "Гулькевичи\n" + "Гурьевск\n" + "Гурьевск\n" + "Гусев\n" + "Гусиноозёрск\n" + "Гусь-Хрустальный\n" + "Давлеканово\n" + "Дагестанские Огни\n" + "Далматово\n" + "Дальнегорск\n" + "Дальнереченск\n" + "Данилов\n" + "Данков\n" + "Дегтярск\n" + "Дедовск\n" + "Демидов\n" + "Дербент\n" + "Десногорск\n" + "Джанкой\n" + "Дзержинск\n" + "Дзержинский\n" + "Дивногорск\n" + "Дигора\n" + "Димитровград\n" + "Дмитриев\n" + "Дмитров\n" + "Дмитровск\n" + "Дно\n" + "Добрянка\n" + "Долгопрудный\n" + "Долинск\n" + "Домодедово\n" + "Донецк\n" + "Донской\n" + "Дорогобуж\n" + "Дрезна\n" + "Дубна\n" + "Дубовка\n" + "Дудинка\n" + "Духовщина\n" + "Дюртюли\n" + "Дятьково\n" + "Евпатория\n" + "Егорьевск\n" + "Ейск\n" + "Екатеринбург\n" + "Елабуга\n" + "Елец\n" + "Елизово\n" + "Ельня\n" + "Еманжелинск\n" + "Емва\n" + "Енисейск\n" + "Ермолино\n" + "Ершов\n" + "Ессентуки\n" + "Ефремов\n" + "Железноводск\n" + "Железногорск\n" + "Железногорск\n" + "Железногорск-Илимский\n" + "Жердевка\n" + "Жигулёвск\n" + "Жиздра\n" + "Жирновск\n" + "Жуков\n" + "Жуковка\n" + "Жуковский\n" + "Завитинск\n" + "Заводоуковск\n" + "Заволжск\n" + "Заволжье\n" + "Задонск\n" + "Заинск\n" + "Закаменск\n" + "Заозёрный\n" + "Заозёрск\n" + "Западная Двина\n" + "Заполярный\n" + "Зарайск\n" + "Заречный\n" + "Заречный\n" + "Заринск\n" + "Звенигово\n" + "Звенигород\n" + "Зверево\n" + "Зеленогорск\n" + "Зеленоградск\n" + "Зеленодольск\n" + "Зеленокумск\n" + "Зерноград\n" + "Зея\n" + "Зима\n" + "Златоуст\n" + "Злынка\n" + "Змеиногорск\n" + "Знаменск\n" + "Зубцов\n" + "Зуевка\n" + "Ивангород\n" + "Иваново\n" + "Ивантеевка\n" + "Ивдель\n" + "Игарка\n" + "Ижевск\n" + "Избербаш\n" + "Изобильный\n" + "Иланский\n" + "Инза\n" + "Иннополис\n" + "Инсар\n" + "Инта\n" + "Ипатово\n" + "Ирбит\n" + "Иркутск\n" + "Исилькуль\n" + "Искитим\n" + "Истра\n" + "Ишим\n" + "Ишимбай\n" + "Йошкар-Ола\n" + "Кадников\n" + "Казань\n" + "Калач\n" + "Калач-на-Дону\n" + "Калачинск\n" + "Калининград\n" + "Калининск\n" + "Калтан\n" + "Калуга\n" + "Калязин\n" + "Камбарка\n" + "Каменка\n" + "Каменногорск\n" + "Каменск-Уральский\n" + "Каменск-Шахтинский\n" + "Камень-на-Оби\n" + "Камешково\n" + "Камызяк\n" + "Камышин\n" + "Камышлов\n" + "Канаш\n" + "Кандалакша\n" + "Канск\n" + "Карабаново\n" + "Карабаш\n" + "Карабулак\n" + "Карасук\n" + "Карачаевск\n" + "Карачев\n" + "Каргат\n" + "Каргополь\n" + "Карпинск\n" + "Карталы\n" + "Касимов\n" + "Касли\n" + "Каспийск\n" + "Катав-Ивановск\n" + "Катайск\n" + "Качканар\n" + "Кашин\n" + "Кашира\n" + "Кедровый\n" + "Кемерово\n" + "Кемь\n" + "Керчь\n" + "Кизел\n" + "Кизилюрт\n" + "Кизляр\n" + "Кимовск\n" + "Кимры\n" + "Кингисепп\n" + "Кинель\n" + "Кинешма\n" + "Киреевск\n" + "Киренск\n" + "Киржач\n" + "Кириллов\n" + "Кириши\n" + "Киров\n" + "Киров\n" + "Кировград\n" + "Кирово-Чепецк\n" + "Кировск\n" + "Кировск\n" + "Кирс\n" + "Кирсанов\n" + "Киселёвск\n" + "Кисловодск\n" + "Клин\n" + "Клинцы\n" + "Княгинино\n" + "Ковдор\n" + "Ковров\n" + "Ковылкино\n" + "Когалым\n" + "Кодинск\n" + "Козельск\n" + "Козловка\n" + "Козьмодемьянск\n" + "Кола\n" + "Кологрив\n" + "Коломна\n" + "Колпашево\n" + "Кольчугино\n" + "Коммунар\n" + "Комсомольск\n" + "Комсомольск-на-Амуре\n" + "Конаково\n" + "Кондопога\n" + "Кондрово\n" + "Константиновск\n" + "Копейск\n" + "Кораблино\n" + "Кореновск\n" + "Коркино\n" + "Королёв\n" + "Короча\n" + "Корсаков\n" + "Коряжма\n" + "Костерёво\n" + "Костомукша\n" + "Кострома\n" + "Котельники\n" + "Котельниково\n" + "Котельнич\n" + "Котлас\n" + "Котово\n" + "Котовск\n" + "Кохма\n" + "Красавино\n" + "Красноармейск\n" + "Красноармейск\n" + "Красновишерск\n" + "Красногорск\n" + "Краснодар\n" + "Краснозаводск\n" + "Краснознаменск\n" + "Краснознаменск\n" + "Краснокаменск\n" + "Краснокамск\n" + "Красноперекопск\n" + "Краснослободск\n" + "Краснослободск\n" + "Краснотурьинск\n" + "Красноуральск\n" + "Красноуфимск\n" + "Красноярск\n" + "Красный Кут\n" + "Красный Сулин\n" + "Красный Холм\n" + "Кремёнки\n" + "Кропоткин\n" + "Крымск\n" + "Кстово\n" + "Кубинка\n" + "Кувандык\n" + "Кувшиново\n" + "Кудрово\n" + "Кудымкар\n" + "Кузнецк\n" + "Куйбышев\n" + "Кукмор\n" + "Кулебаки\n" + "Кумертау\n" + "Кунгур\n" + "Купино\n" + "Курган\n" + "Курганинск\n" + "Курильск\n" + "Курлово\n" + "Куровское\n" + "Курск\n" + "Куртамыш\n" + "Курчалой\n" + "Курчатов\n" + "Куса\n" + "Кушва\n" + "Кызыл\n" + "Кыштым\n" + "Кяхта\n" + "Лабинск\n" + "Лабытнанги\n" + "Лагань\n" + "Ладушкин\n" + "Лаишево\n" + "Лакинск\n" + "Лангепас\n" + "Лахденпохья\n" + "Лебедянь\n" + "Лениногорск\n" + "Ленинск\n" + "Ленинск-Кузнецкий\n" + "Ленск\n" + "Лермонтов\n" + "Лесной\n" + "Лесозаводск\n" + "Лесосибирск\n" + "Ливны\n" + "Ликино-Дулёво\n" + "Липецк\n" + "Липки\n" + "Лиски\n" + "Лихославль\n" + "Лобня\n" + "Лодейное Поле\n" + "Лосино-Петровский\n" + "Луга\n" + "Луза\n" + "Лукоянов\n" + "Луховицы\n" + "Лысково\n" + "Лысьва\n" + "Лыткарино\n" + "Льгов\n" + "Любань\n" + "Люберцы\n" + "Любим\n" + "Людиново\n" + "Лянтор\n" + "Магадан\n" + "Магас\n" + "Магнитогорск\n" + "Майкоп\n" + "Майский\n" + "Макаров\n" + "Макарьев\n" + "Макушино\n" + "Малая Вишера\n" + "Малгобек\n" + "Малмыж\n" + "Малоархангельск\n" + "Малоярославец\n" + "Мамадыш\n" + "Мамоново\n" + "Мантурово\n" + "Мариинск\n" + "Мариинский Посад\n" + "Маркс\n" + "Махачкала\n" + "Мглин\n" + "Мегион\n" + "Медвежьегорск\n" + "Медногорск\n" + "Медынь\n" + "Межгорье\n" + "Междуреченск\n" + "Мезень\n" + "Меленки\n" + "Мелеуз\n" + "Менделеевск\n" + "Мензелинск\n" + "Мещовск\n" + "Миасс\n" + "Микунь\n" + "Миллерово\n" + "Минеральные Воды\n" + "Минусинск\n" + "Миньяр\n" + "Мирный\n" + "Мирный\n" + "Михайлов\n" +"Михайловка\n" + "Михайловск\n" + "Михайловск\n" + "Мичуринск\n" + "Могоча\n" + "Можайск\n" + "Можга\n" + "Моздок\n" + "Мончегорск\n" + "Морозовск\n" + "Моршанск\n" + "Мосальск\n" + "Москва\n" + "Муравленко\n" + "Мураши\n" + "Мурино\n" + "Мурманск\n" + "Муром\n" + "Мценск\n" + "Мыски\n" + "Мытищи\n" + "Мышкин\n" + "Набережные Челны\n" + "Навашино\n" + "Наволоки\n" + "Надым\n" + "Назарово\n" + "Назрань\n" + "Называевск\n" + "Нальчик\n" + "Нариманов\n" + "Наро-Фоминск\n" + "Нарткала\n" + "Нарьян-Мар\n" + "Находка\n" + "Невель\n" + "Невельск\n" + "Невинномысск\n" + "Невьянск\n" + "Нелидово\n" + "Неман\n" + "Нерехта\n" + "Нерчинск\n" + "Нерюнгри\n" + "Нестеров\n" + "Нефтегорск\n" + "Нефтекамск\n" + "Нефтекумск\n" + "Нефтеюганск\n" + "Нея\n" + "Нижневартовск\n" + "Нижнекамск\n" + "Нижнеудинск\n" + "Нижние Серги\n" + "Нижний Ломов\n" + "Нижний Новгород\n" + "Нижний Тагил\n" + "Нижняя Салда\n" + "Нижняя Тура\n" + "Николаевск\n" + "Николаевск-на-Амуре\n" + "Никольск\n" + "Никольск\n" + "Никольское\n" + "Новая Ладога\n" + "Новая Ляля\n" + "Новоалександровск\n" + "Новоалтайск\n" + "Новоаннинский\n" + "Нововоронеж\n" + "Новодвинск\n" + "Новозыбков\n" + "Новокубанск\n" + "Новокузнецк\n" + "Новокуйбышевск\n" + "Новомичуринск\n" + "Новомосковск\n" + "Новопавловск\n" + "Новоржев\n" + "Новороссийск\n" + "Новосибирск\n" + "Новосиль\n" + "Новосокольники\n" + "Новотроицк\n" + "Новоузенск\n" + "Новоульяновск\n" + "Новоуральск\n" + "Новохопёрск\n" + "Новочебоксарск\n" + "Новочеркасск\n" + "Новошахтинск\n" + "Новый Оскол\n" + "Новый Уренгой\n" + "Ногинск\n" + "Нолинск\n" + "Норильск\n" + "Ноябрьск\n" + "Нурлат\n" + "Нытва\n" + "Нюрба\n" + "Нягань\n" + "Нязепетровск\n" + "Няндома\n" + "Облучье\n" + "Обнинск\n" + "Обоянь\n" + "Обь\n" + "Одинцово\n" + "Озёрск\n" + "Озёрск\n" + "Озёры\n" + "Октябрьск\n" + "Октябрьский\n" + "Окуловка\n" + "Олёкминск\n" + "Оленегорск\n" + "Олонец\n" + "Омск\n" + "Омутнинск\n" + "Онега\n" + "Опочка\n" + "Орёл\n" + "Оренбург\n" + "Орехово-Зуево\n" + "Орлов\n" + "Орск\n" + "Оса\n" + "Осинники\n" + "Осташков\n" + "Остров\n" + "Островной\n" + "Острогожск\n" + "Отрадное\n" + "Отрадный\n" + "Оха\n" + "Оханск\n" + "Очёр\n" + "Павлово\n" + "Павловск\n" + "Павловский Посад\n" + "Палласовка\n" + "Партизанск\n" + "Певек\n" + "Пенза\n" + "Первомайск\n" + "Первоуральск\n" + "Перевоз\n" + "Пересвет\n" + "Переславль-Залесский\n" + "Пермь\n" + "Пестово\n" + "Петров Вал\n" + "Петровск\n" + "Петровск-Забайкальский\n" + "Петрозаводск\n" + "Петропавловск-Камчатский\n" + "Петухово\n" + "Петушки\n" + "Печора\n" + "Печоры\n" + "Пикалёво\n" + "Пионерский\n" + "Питкяранта\n" + "Плавск\n" + "Пласт\n" + "Плёс\n" + "Поворино\n" + "Подольск\n" + "Подпорожье\n" + "Покачи\n" + "Покров\n" + "Покровск\n" + "Полевской\n" + "Полесск\n" + "Полысаево\n" + "Полярные Зори\n" + "Полярный\n" + "Поронайск\n" + "Порхов\n" + "Похвистнево\n" + "Почеп\n" + "Починок\n" + "Пошехонье\n" + "Правдинск\n" + "Приволжск\n" + "Приморск\n" + "Приморск\n" + "Приморско-Ахтарск\n" + "Приозерск\n" + "Прокопьевск\n" + "Пролетарск\n" + "Протвино\n" + "Прохладный\n" + "Псков\n" + "Пугачёв\n" + "Пудож\n" + "Пустошка\n" + "Пучеж\n" + "Пушкино\n" + "Пущино\n" + "Пыталово\n" + "Пыть-Ях\n" + "Пятигорск\n" + "Радужный\n" + "Радужный\n" + "Райчихинск\n" + "Раменское\n" + "Рассказово\n" + "Ревда\n" + "Реж\n" + "Реутов\n" + "Ржев\n" + "Родники\n" + "Рославль\n" + "Россошь\n" + "Ростов\n" + "Ростов-на-Дону\n" + "Рошаль\n" + "Ртищево\n" + "Рубцовск\n" + "Рудня\n" + "Руза\n" + "Рузаевка\n" + "Рыбинск\n" + "Рыбное\n" + "Рыльск\n" + "Ряжск\n" + "Рязань\n" + "Саки\n" + "Салават\n" + "Салаир\n" + "Салехард\n" + "Сальск\n" + "Самара\n" + "Санкт-Петербург\n" + "Саранск\n" + "Сарапул\n" + "Саратов\n" + "Саров\n" + "Сасово\n" + "Сатка\n" + "Сафоново\n" + "Саяногорск\n" + "Саянск\n" + "Светлогорск\n" + "Светлоград\n" + "Светлый\n" + "Светогорск\n" + "Свирск\n" + "Свободный\n" + "Себеж\n" + "Севастополь\n" + "Северо-Курильск\n" + "Северобайкальск\n" + "Северодвинск\n" + "Североморск\n" + "Североуральск\n" + "Северск\n" + "Севск\n" + "Сегежа\n" + "Сельцо\n" + "Семёнов\n" + "Семикаракорск\n" + "Семилуки\n" + "Сенгилей\n" + "Серафимович\n" + "Сергач\n" + "Сергиев Посад\n" + "Сердобск\n" + "Серов\n" + "Серпухов\n" + "Сертолово\n" + "Сибай\n" + "Сим\n" + "Симферополь\n" + "Сковородино\n" + "Скопин\n" + "Славгород\n" + "Славск\n" + "Славянск-на-Кубани\n" + "Сланцы\n" + "Слободской\n" + "Слюдянка\n" + "Смоленск\n" + "Снежинск\n" + "Снежногорск\n" + "Собинка\n" + "Советск\n" + "Советск\n" + "Советск\n" + "Советская Гавань\n" + "Советский\n" + "Сокол\n" + "Солигалич\n" + "Соликамск\n" + "Солнечногорск\n" + "Соль-Илецк\n" + "Сольвычегодск\n" + "Сольцы\n" + "Сорочинск\n" + "Сорск\n" + "Сортавала\n" + "Сосенский\n" + "Сосновка\n" + "Сосновоборск\n" + "Сосновый Бор\n" + "Сосногорск\n" + "Сочи\n" + "Спас-Деменск\n" + "Спас-Клепики\n" + "Спасск\n" + "Спасск-Дальний\n" + "Спасск-Рязанский\n" + "Среднеколымск\n" + "Среднеуральск\n" + "Сретенск\n" + "Ставрополь\n" + "Старая Купавна\n" + "Старая Русса\n" + "Старица\n" + "Стародуб\n" + "Старый Крым\n" + "Старый Оскол\n" + "Стерлитамак\n" + "Стрежевой\n" + "Строитель\n" + "Струнино\n" + "Ступино\n" + "Суворов\n" + "Судак\n" + "Суджа\n" + "Судогда\n" + "Суздаль\n" + "Сунжа\n" + "Суоярви\n" + "Сураж\n" + "Сургут\n" + "Суровикино\n" + "Сурск\n" + "Сусуман\n" + "Сухиничи\n" + "Сухой Лог\n" + "Сызрань\n" + "Сыктывкар\n" + "Сысерть\n" + "Сычёвка\n" + "Сясьстрой\n" + "Тавда\n" + "Таганрог\n" + "Тайга\n" + "Тайшет\n" + "Талдом\n" + "Талица\n" + "Тамбов\n" + "Тара\n" + "Тарко-Сале\n" + "Таруса\n" + "Татарск\n" + "Таштагол\n" + "Тверь\n" + "Теберда\n" + "Тейково\n" + "Темников\n" + "Темрюк\n" + "Терек\n" + "Тетюши\n" + "Тимашёвск\n" + "Тихвин\n" + "Тихорецк\n" + "Тобольск\n" + "Тогучин\n" + "Тольятти\n" + "Томари\n" + "Томмот\n" + "Томск\n" + "Топки\n" + "Торжок\n" + "Торопец\n" + "Тосно\n" + "Тотьма\n" + "Трёхгорный\n" + "Троицк\n" + "Трубчевск\n" + "Туапсе\n" + "Туймазы\n" + "Тула\n" + "Тулун\n" + "Туран\n" + "Туринск\n" + "Тутаев\n" + "Тында\n" + "Тырныауз\n" + "Тюкалинск\n" + "Тюмень\n" + "Уварово\n" + "Углегорск\n" + "Углич\n" + "Удачный\n" + "Удомля\n" + "Ужур\n" + "Узловая\n" + "Улан-Удэ\n" + "Ульяновск\n" + "Унеча\n" + "Урай\n" + "Урень\n" + "Уржум\n" + "Урус-Мартан\n" + "Урюпинск\n" + "Усинск\n" + "Усмань\n" + "Усолье\n" + "Усолье-Сибирское\n" + "Уссурийск\n" + "Усть-Джегута\n" + "Усть-Илимск\n" + "Усть-Катав\n" + "Усть-Кут\n" + "Усть-Лабинск\n" + "Устюжна\n" + "Уфа\n" + "Ухта\n" + "Учалы\n" + "Уяр\n" + "Фатеж\n" + "Феодосия\n" + "Фокино\n" + "Фокино\n" + "Фролово\n" + "Фрязино\n" + "Фурманов\n" + "Хабаровск\n" + "Хадыженск\n" + "Ханты-Мансийск\n" + "Харабали\n" + "Харовск\n" + "Хасавюрт\n" + "Хвалынск\n" + "Хилок\n" + "Химки\n" + "Холм\n" + "Холмск\n" + "Хотьково\n" + "Цивильск\n" + "Цимлянск\n" + "Циолковский\n" + "Чадан\n" + "Чайковский\n" + "Чапаевск\n" + "Чаплыгин\n" + "Чебаркуль\n" + "Чебоксары\n" + "Чегем\n" + "Чекалин\n" + "Челябинск\n" + "Чердынь\n" + "Черемхово\n" + "Черепаново\n" + "Череповец\n" + "Черкесск\n" + "Чёрмоз\n" + "Черноголовка\n" + "Черногорск\n" + "Чернушка\n" + "Черняховск\n" + "Чехов\n" + "Чистополь\n" + "Чита\n" + "Чкаловск\n" + "Чудово\n" + "Чулым\n" + "Чусовой\n" + "Чухлома\n" + "Шагонар\n" + "Шадринск\n" + "Шали\n" + "Шарыпово\n" + "Шарья\n" + "Шатура\n" + "Шахты\n" + "Шахунья\n" + "Шацк\n" + "Шебекино\n" + "Шелехов\n" + "Шенкурск\n" + "Шилка\n" + "Шимановск\n" + "Шиханы\n" + "Шлиссельбург\n" + "Шумерля\n" + "Шумиха\n" + "Шуя\n" + "Щёкино\n" + "Щёлкино\n" + "Щёлково\n" + "Щигры\n" + "Щучье\n" + "Электрогорск\n" + "Электросталь\n" + "Электроугли\n" + "Элиста\n" + "Энгельс\n" + "Эртиль\n" + "Югорск\n" + "Южа\n" + "Южно-Сахалинск\n" + "Южно-Сухокумск\n" + "Южноуральск\n" + "Юрга\n" + "Юрьев-Польский\n" + "Юрьевец\n" + "Юрюзань\n" + "Юхнов\n" + "Ядрин\n" + "Якутск\n" + "Ялта\n" + "Ялуторовск\n" + "Янаул\n" + "Яранск\n" + "Яровое\n" + "Ярославль\n" + "Ярцево\n" + "Ясногорск\n" + "Ясный\n" + "Яхрома";
    ListView listView;
    String[] cities = citiesString.split("\n");
    ArrayList cityList;
    ArrayAdapter arrayAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.find_city);

        listView = findViewById(R.id.listview);
        cityList = new ArrayList<>();
        for (String city : cities) {
            cityList.add(city);
        }
        arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, cityList);
        listView.setAdapter(arrayAdapter);

        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                String selectedCity = (String) parent.getItemAtPosition(position);

                // Сохранение выбранного города в SharedPreferences
                SharedPreferences sharedPreferences = getSharedPreferences("MyPrefs", MODE_PRIVATE);
                SharedPreferences.Editor editor = sharedPreferences.edit();
                editor.putString("town", selectedCity);
                editor.apply();

                // Переход к WeatherActivity с выбранным городом
                Intent intent = new Intent(FindCityActivity.this, MainPageActivity.class);
                intent.putExtra("town", selectedCity);
                startActivity(intent);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_search, menu);
        MenuItem menuItem = menu.findItem(R.id.action_search);
        SearchView searchView = (SearchView) menuItem.getActionView();

        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
            @Override
            public boolean onQueryTextSubmit(String query) {
                return false;
            }

            @Override
            public boolean onQueryTextChange(String newText) {
                cityList.clear();
                if (newText.isEmpty()) {
                    for (String city : cities) {
                        cityList.add(city);
                    }
                } else {
                    for (String city : cities) {
                        if (city.toLowerCase().contains(newText.toLowerCase())) {
                            cityList.add(city);
                        }
                    }
                }
                arrayAdapter = new ArrayAdapter<String>(FindCityActivity.this, android.R.layout.simple_list_item_1, cityList);
                listView.setAdapter(arrayAdapter);
                arrayAdapter.notifyDataSetChanged(); // добавляем вызов notifyDataSetChanged для обновления списка после фильтрации
                return true;
            }
        });

        return super.onCreateOptionsMenu(menu);
    }
}
